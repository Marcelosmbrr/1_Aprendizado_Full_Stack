<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css.css">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200&display=swap" rel="stylesheet">
    <title>Ajax com Fetch</title>
</head>
<body>

    <header>
        <div id = "box-botoes">
            <button class = "botao primeiro" onclick = "script_fetch(1)">Texto1</button>
            <button class = "botao segundo" onclick = "script_fetch(2)">Texto2</button>
            <button class = "botao terceiro" onclick = "script_fetch(3)">Texto3</button>
        </div>
    </header>

    <main id = "conteudo">
        
    </main>

    <script>

        container = window.document.querySelector("main#conteudo");

        function script_fetch(valor){

            console.log(fetch);

            if(valor == 1){
                console.log("Clicado o primeiro botão");

                url = "texto1.html";

                
                //Requisição ao recurso local, ou url.....retorna a promisse para a variável, com a resposta
                const requisicao1 = fetch(url);
                console.log(requisicao1);
                //O parâmetro da função then é uma função cujo próprio parâmetro é a resposta obtida pela requisição fetch
                //A response é a resposta da resolução da promisse fetch
                requisicao1.then(response => {
                    console.log(response);
                    //Converte a resposta para o conteúdo final
                    //Não existe apenas .text(), mas também outros, para outros casos
                    return response.text();    
                })
                //Uso da response tratada
                .then(function(text) {
                    console.log(text);
                    container.innerHTML = text;
                })
                
                
               
            }
            else if(valor == 2){
                console.log("Clicado o segundo botão");

                url = "texto2.html";

                //Requisição ao recurso local, ou url.....retorna a promisse para a variável, com a resposta
                const requisicao2 = fetch(url);
                console.log(requisicao2);
                //Tratamento da Response
                requisicao2.then(response => {
                    console.log(response);
                    return response.text();    
                })
                //Uso da response tratada
                .then(function(text) {
                    console.log(text);
                    container.innerHTML = text;
                })
            } else {
                console.log("Clicado o terceiro botão");

                url = "texto3.html";

                //Requisição ao recurso local, ou url.....retorna a promisse para a variável, com a resposta
                const requisicao3 = fetch(url);
                console.log(requisicao3);
                //Tratamento da Response
                requisicao3.then(response => {
                    console.log(response);
                    return response.text();    
                })
                //Uso da response tratada
                .then(function(text) {
                    console.log(text);
                    container.innerHTML = text;
                })
            }
        }
        
    </script>


    
</body>
</html>